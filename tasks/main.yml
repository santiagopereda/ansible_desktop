---
- name: Read main variables
  ansible.builtin.include_vars: 
    file: main.yml

- name: Load variables for the target system
  ansible.builtin.include_vars: "{{ item }}"
  with_first_found:
    - "os/{{ ansible_distribution }}/{{ ansible_distribution_release }}.yml"
    - "os/{{ ansible_distribution }}.yml"
    - "os/{{ ansible_os_family }}_{{ ansible_architecture }}.yml"
    - "os/{{ ansible_os_family }}.yml"
    - "os/default.yml"

- name: Install build requirements
  include_tasks: install/packages.yml
- name: Install Fonts
  include_tasks: install/fontsetup.yml
- name: Create root user
  include_tasks: system/users.yml
- name: Setup cron task
  include_tasks: system/cron.yml
- name: Install Zsh and components
  include_tasks: shell/zsh.yml
- name: Install and setup pyenv
  include_tasks: virtualenv/pyenv.yml